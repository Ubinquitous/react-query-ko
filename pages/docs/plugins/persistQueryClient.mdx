---
id: persistQueryClient
title: persistQueryClient
---

## persistQueryClient

ì´ ìœ í‹¸ë¦¬í‹° ì„¸íŠ¸ëŠ” "persisters"ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ queryClientë¥¼ ë‚˜ì¤‘ì— ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì €ì¥í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤. ë‹¤ì–‘í•œ **persisters**ë¥¼ ì‚¬ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì™€ ìºì‹œë¥¼ ì—¬ëŸ¬ ì €ì¥ì†Œ ê³„ì¸µì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Build Persisters

- [createSyncStoragePersister](../createSyncStoragePersister)
- [createAsyncStoragePersister](../createAsyncStoragePersister)
- [ì»¤ìŠ¤í…€ persister ë§Œë“¤ê¸°](#persisters)

## How It Works

**ì¤‘ìš”** - persistenceê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ë ¤ë©´ `QueryClient`ì— `gcTime` ê°’ì„ ì„¤ì •í•˜ì—¬ hydration ì¤‘ ê¸°ë³¸ê°’ì„ ë®ì–´ì“°ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤ (ìœ„ ì˜ˆì œ ì°¸ì¡°).

`QueryClient` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ `gcTime`ì´ ì„¤ì •ë˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ì¸ `300000` (5ë¶„)ìœ¼ë¡œ ì„¤ì •ë˜ë©°, 5ë¶„ ë™ì•ˆ ë¹„í™œì„± ìƒíƒœê°€ ë˜ë©´ ì €ì¥ëœ ìºì‹œê°€ ì‚­ì œë©ë‹ˆë‹¤. ì´ê²ƒì´ ê¸°ë³¸ì ì¸ garbage collection ë™ì‘ì…ë‹ˆë‹¤.

ì´ ê°’ì€ `persistQueryClient`ì˜ `maxAge` ì˜µì…˜ê³¼ ë™ì¼í•˜ê±°ë‚˜ ë” ë†’ì€ ê°’ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `maxAge`ê°€ 24ì‹œê°„(ê¸°ë³¸ê°’)ì¸ ê²½ìš° `gcTime`ë„ 24ì‹œê°„ ì´ìƒìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. `maxAge`ë³´ë‹¤ ë‚®ìœ¼ë©´ garbage collectionì´ ì‘ë™í•˜ì—¬ ì˜ˆìƒë³´ë‹¤ ì¼ì° ì €ì¥ëœ ìºì‹œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`gcTime`ì„ `Infinity`ë¡œ ì„¤ì •í•˜ì—¬ garbage collection ë™ì‘ì„ ì™„ì „íˆ ë¹„í™œì„±í™”í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

JavaScriptì˜ ì œí•œìœ¼ë¡œ ì¸í•´ ìµœëŒ€ í—ˆìš© `gcTime`ì€ ì•½ 24ì¼ì…ë‹ˆë‹¤ (ìì„¸í•œ ë‚´ìš©ì€ [ì—¬ê¸°](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#maximum_delay_value)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”).

```tsx
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      gcTime: 1000 * 60 * 60 * 24, // 24ì‹œê°„
    },
  },
});
```

### Cache Busting

ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ë°ì´í„°ì— ëŒ€í•œ ë³€ê²½ìœ¼ë¡œ ì¸í•´ ì¦‰ì‹œ ëª¨ë“  ìºì‹œëœ ë°ì´í„°ê°€ ë¬´íš¨í™”ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ´ ë•ŒëŠ” `buster` ë¬¸ìì—´ ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìºì‹œì—ì„œ ì´ buster ë¬¸ìì—´ì´ í¬í•¨ë˜ì§€ ì•Šì€ ê²½ìš°, ìºì‹œëŠ” ì‚­ì œë©ë‹ˆë‹¤. ë‹¤ìŒ ì—¬ëŸ¬ í•¨ìˆ˜ì—ì„œ ì´ ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx
persistQueryClient({ queryClient, persister, buster: buildHash });
persistQueryClientSave({ queryClient, persister, buster: buildHash });
persistQueryClientRestore({ queryClient, persister, buster: buildHash });
```

### Removal

ë°ì´í„°ê°€ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¡œ íŒëª…ëœ ê²½ìš°:

1. ë§Œë£Œëœ ê²½ìš° (see `maxAge`)
2. ë¬´íš¨í™”ëœ ê²½ìš° (see `buster`)
3. ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° (ì˜ˆ: `throws ...`)
4. ë¹„ì–´ ìˆëŠ” ê²½ìš° (ì˜ˆ: `undefined`)

`removeClient()`ê°€ í˜¸ì¶œë˜ê³  ìºì‹œê°€ ì¦‰ì‹œ ì‚­ì œë©ë‹ˆë‹¤.

## API

### `persistQueryClientSave`

- ì¿¼ë¦¬/ë³€ê²½ ì‚¬í•­ì´ [`dehydrated`](../../reference/hydration#dehydrate)ë˜ê³  ì œê³µí•œ persisterì— ì˜í•´ ì €ì¥ë©ë‹ˆë‹¤.
- `createSyncStoragePersister`ì™€ `createAsyncStoragePersister`ëŠ” ì´ ì‘ì—…ì´ ìµœëŒ€ 1ì´ˆë§ˆë‹¤ í•œ ë²ˆë§Œ ìˆ˜í–‰ë˜ë„ë¡ ì¡°ì ˆí•˜ì—¬ ì ì¬ì ìœ¼ë¡œ ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì“°ê¸°ë¥¼ ì¤„ì…ë‹ˆë‹¤. ì¡°ì • ê°€ëŠ¥í•œ throttle timingì— ëŒ€í•œ ë¬¸ì„œë¥¼ ê²€í† í•˜ì‹­ì‹œì˜¤.

ì›í•˜ëŠ” ìˆœê°„ì— ìºì‹œë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
persistQueryClientSave({
  queryClient,
  persister,
  buster = "",
  dehydrateOptions = undefined,
});
```

### `persistQueryClientSubscribe`

`persistQueryClientSave`ë¥¼ ì‚¬ìš©í•˜ì—¬ `queryClient`ì˜ ìºì‹œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•  ë•Œ "Remember me"ë¥¼ ì²´í¬í•˜ë©´ `subscribe`ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `unsubscribe` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ë©°, ì´ë¥¼ í†µí•´ ëª¨ë‹ˆí„°ë§ì„ ì¤‘ë‹¨í•˜ê³  persisted cache ì—…ë°ì´íŠ¸ë¥¼ ì¢…ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `unsubscribe` ì´í›„ì— persisted cacheë¥¼ ì§€ìš°ê³  ì‹¶ë‹¤ë©´, ìƒˆë¡œìš´ `buster`ë¥¼ `persistQueryClientRestore`ì— ì „ë‹¬í•˜ì—¬ persisterì˜ `removeClient` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³  persisted cacheë¥¼ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
persistQueryClientSubscribe({
  queryClient,
  persister,
  buster = "",
  dehydrateOptions = undefined,
});
```

### `persistQueryClientRestore`

- persisterì—ì„œ ì´ì „ì— ì €ì¥ëœ dehydrated query/mutation ìºì‹œë¥¼ `queryClient`ì˜ ì¿¼ë¦¬ ìºì‹œë¡œ [`hydrate`](../../reference/hydration#hydrate)í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤.
- `maxAge`(ê¸°ë³¸ê°’: 24ì‹œê°„)ë³´ë‹¤ ì˜¤ë˜ëœ ìºì‹œëŠ” ì‚­ì œë©ë‹ˆë‹¤. ì´ íƒ€ì´ë°ì€ í•„ìš”ì— ë§ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì›í•˜ëŠ” ìˆœê°„ì— ìºì‹œë¥¼ ë³µì›í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
persistQueryClientRestore({
  queryClient,
  persister,
  maxAge = 1000 * 60 * 60 * 24, // 24ì‹œê°„
  buster = "",
  hydrateOptions = undefined,
});
```

### `persistQueryClient`

ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:

1. ì¦‰ì‹œ ì €ì¥ëœ ìºì‹œë¥¼ ë³µì›í•©ë‹ˆë‹¤ ([`persistQueryClientRestore`](#persistqueryclientrestore) ì°¸ì¡°).
2. ì¿¼ë¦¬ ìºì‹œì— êµ¬ë…í•˜ê³  `unsubscribe` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤ ([`persistQueryClientSubscribe`](#persistqueryclientsubscribe) ì°¸ì¡°).

ì´ ê¸°ëŠ¥ì€ ë²„ì „ 3.xì—ì„œ ìœ ì§€ë©ë‹ˆë‹¤.

```tsx
persistQueryClient({
  queryClient,
  persister,
  maxAge = 1000 * 60 * 60 * 24, // 24ì‹œê°„
  buster = "",
  hydrateOptions = undefined,
  dehydrateOptions = undefined,
});
```

### `Options`

ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ì˜µì…˜ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```tsx
interface PersistQueryClientOptions {
  /** ì €ì¥í•  QueryClient */
  queryClient: QueryClient;
  /** ìºì‹œë¥¼ ì €ì¥í•˜ê³  ë³µì›í•˜ê¸° ìœ„í•œ Persister ì¸í„°í˜ì´ìŠ¤ */
  persister: Persister;
  /** ìºì‹œì˜ ìµœëŒ€ í—ˆìš© ì—°ë ¹(ë°€ë¦¬ì´ˆ) */
  maxAge?: number;
  /** ë™ì¼í•œ buster ë¬¸ìì—´ì„ ê³µìœ í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìºì‹œë¥¼ ê°•ì œë¡œ ë¬´íš¨í™”í•  ìˆ˜ ìˆëŠ” ê³ ìœ í•œ ë¬¸ìì—´ */
  buster?: string;
  /** hydrate í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” ì˜µì…˜
   * `persistQueryClientSave` ë˜ëŠ” `persistQueryClientSubscribe`ì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŒ */
  hydrateOptions?: HydrateOptions;
  /** dehydrate í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” ì˜µì…˜
   * `persistQueryClientRestore`ì—ì„œëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŒ */
  dehydrateOptions?: DehydrateOptions;
}
```

ì‹¤ì œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„¸ ê°€ì§€ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤:

- `PersistedQueryClientSaveOptions`: `persistQueryClientSave` ë° `persistQueryClientSubscribe`ì—ì„œ ì‚¬ìš©ë˜ë©°, `hydrateOptions`ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŒ.
- `PersistedQueryClientRestoreOptions`: `persistQueryClientRestore`ì—ì„œ ì‚¬ìš©ë˜ë©°, `dehydrateOptions`ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŒ.
- `PersistQueryClientOptions`: `persistQueryClient`ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.

## Reactì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

[`persistQueryClient`](#persistQueryClient)ëŠ” ìºì‹œë¥¼ ë³µì›í•˜ê³  ë³€ê²½ ì‚¬í•­ì— ìë™ìœ¼ë¡œ êµ¬ë…í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì œê³µëœ ì €ì¥ì†Œì™€ ë™ê¸°í™”í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ë³µì›ì€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì—, ë³µì›í•˜ëŠ” ë™ì•ˆ ì•±ì„ ë Œë”ë§í•˜ë©´ ì¿¼ë¦¬ê°€ ë™ì‹œì— ë§ˆìš´íŠ¸ë˜ê³  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° ê²½ìŸ ì¡°ê±´ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ, React ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ì‚¬ì´í´ ì™¸ë¶€ì—ì„œ ë³€ê²½ ì‚¬í•­ì— êµ¬ë…í•˜ëŠ” ê²½ìš°, êµ¬ë…ì„ í•´ì œí•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤:

```tsx
// ğŸš¨ ë™ê¸°í™”ì—ì„œ êµ¬ë…ì„ í•´ì œí•˜ì§€ ì•ŠìŒ
persistQueryClient({
  queryClient,
  persister: localStoragePersister,
});

// ğŸš¨ ë³µì›ê³¼ ë™ì‹œì— ë°œìƒ
ReactDOM.createRoot(rootElement).render(<App />);
```

### PersistQueryClientProvider

ì´ ê²½ìš°ì—ëŠ” `PersistQueryClientProvider`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ëŠ” React ì»´í¬ë„ŒíŠ¸ ë¼ì´í”„ì‚¬ì´í´ì— ë”°ë¼ êµ¬ë… ë° êµ¬ë… í•´ì œë¥¼ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ë©°, ë³µì› ì¤‘ì— ì¿¼ë¦¬ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤. ì¿¼ë¦¬ëŠ” ì—¬ì „íˆ ë Œë”ë§ë˜ì§€ë§Œ, ë°ì´í„°ê°€ ë³µì›ë  ë•Œê¹Œì§€ `fetchingState: 'idle'` ìƒíƒœë¡œ ìœ ì§€ë©ë‹ˆë‹¤. ë°ì´í„°ê°€ ë³µì›ë˜ë©´, ë°ì´í„°ê°€ ì¶©ë¶„íˆ *ì‹ ì„ *í•˜ë©´ ì¿¼ë¦¬ê°€ ë‹¤ì‹œ ê°€ì ¸ì˜¤ì§€ ì•Šê³ , *initialData*ë„ ì¡´ì¤‘ë©ë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ [QueryClientProvider](../../reference/QueryClientProvider) ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx
import { PersistQueryClientProvider } from "@tanstack/react-query-persist-client";
import { createSyncStoragePersister } from "@tanstack/query-sync-storage-persister";

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      gcTime: 1000 * 60 * 60 * 24, // 24ì‹œê°„
    },
  },
});

const persister = createSyncStoragePersister({
  storage: window.localStorage,
});

ReactDOM.createRoot(rootElement).render(
  <PersistQueryClientProvider
    client={queryClient}
    persistOptions={{ persister }}
  >
    <App />
  </PersistQueryClientProvider>
);
```

#### Props

`PersistQueryClientProvider`ëŠ” [QueryClientProvider](../../reference/QueryClientProvider)ì™€ ë™ì¼í•œ propsë¥¼ ì‚¬ìš©í•˜ë©°, ì¶”ê°€ë¡œ:

- `persistOptions: PersistQueryClientOptions`
  - [`persistQueryClient`](#persistqueryclient)ì— ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  [ì˜µì…˜](#options), ë‹¨ QueryClient ìì²´ëŠ” ì œì™¸
- `onSuccess?: () => Promise<unknown> | unknown`
  - ì„ íƒ ì‚¬í•­
  - ì´ˆê¸° ë³µì›ì´ ì™„ë£Œë˜ë©´ í˜¸ì¶œë¨
  - [resumePausedMutations](../../../../reference/QueryClient/#queryclientresumepausedmutations)ë¥¼ í˜¸ì¶œí•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ìˆìŒ
  - Promiseê°€ ë°˜í™˜ë˜ë©´, í•´ë‹¹ Promiseê°€ í•´ê²°ë  ë•Œê¹Œì§€ ë³µì›ì€ ì§„í–‰ ì¤‘ìœ¼ë¡œ ê°„ì£¼ë¨

### `useIsRestoring`

`PersistQueryClientProvider`ë¥¼ ì‚¬ìš©í•  ë•Œ, `useIsRestoring` í›…ì„ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ë³µì› ì‘ì—…ì´ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í›…ì€ ë³µì› ê³¼ì •ê³¼ ì¿¼ë¦¬ì˜ ë§ˆìš´íŠ¸ ì‚¬ì´ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ê²½ìŸ ì¡°ê±´ì„ ë°©ì§€í•˜ëŠ” ë° ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ `useIsRestoring`ì„ ì‚¬ìš©í•˜ëŠ” ì˜ˆì…ë‹ˆë‹¤:

```tsx
import { useIsRestoring } from "@tanstack/react-query-persist-client";

function MyComponent() {
  const isRestoring = useIsRestoring();

  if (isRestoring) {
    return <div>ë°ì´í„° ë³µì› ì¤‘...</div>;
  }

  return <div>ë°ì´í„° ì¤€ë¹„ ì™„ë£Œ!</div>;
}
```

ì´ë ‡ê²Œ í•˜ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë³µì›ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ë¡œë”© ìƒíƒœë¥¼ í‘œì‹œí•˜ê±°ë‚˜ ì‘ì—…ì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Persisters

### Persisters Interface

PersistersëŠ” ìºì‹œëœ ë°ì´í„°ë¥¼ ì €ì¥, ë³µì› ë° ì œê±°í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```tsx
export interface Persister {
  persistClient(persistClient: PersistedClient): Promisable<void>;
  restoreClient(): Promisable<PersistedClient | undefined>;
  removeClient(): Promisable<void>;
}
```

`PersistedClient`ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë©ë‹ˆë‹¤:

```tsx
export interface PersistedClient {
  timestamp: number;
  buster: string;
  cacheState: any;
}
```

ì´ íƒ€ì…ë“¤ì„ ê°€ì ¸ì™€ì„œ ì»¤ìŠ¤í…€ persisterë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```tsx
import {
  PersistedClient,
  Persister,
} from "@tanstack/react-query-persist-client";
```

### Building A Persister

ë‹¤ì–‘í•œ ì €ì¥ì†Œ ì†”ë£¨ì…˜ì„ ìœ„í•´ persistersë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)ë¥¼ ì‚¬ìš©í•˜ëŠ” persisterë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. IndexedDBëŠ” `Web Storage API`ë³´ë‹¤ ë” ë§ì€ ì €ì¥ ìš©ëŸ‰ì„ ì§€ì›í•˜ë©°, ì§ë ¬í™”ê°€ í•„ìš” ì—†ìŠµë‹ˆë‹¤.

IndexedDB persisterì˜ ê¸°ë³¸ êµ¬í˜„ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```tsx
import { get, set, del } from "idb-keyval";
import {
  PersistedClient,
  Persister,
} from "@tanstack/react-query-persist-client";

/**
 * Indexed DB persisterë¥¼ ìƒì„±í•©ë‹ˆë‹¤
 * @see https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API
 */
export function createIDBPersister(idbValidKey: IDBValidKey = "reactQuery") {
  return {
    persistClient: async (client: PersistedClient) => {
      await set(idbValidKey, client);
    },
    restoreClient: async () => {
      return await get<PersistedClient>(idbValidKey);
    },
    removeClient: async () => {
      await del(idbValidKey);
    },
  } as Persister;
}
```

ì´ ì˜ˆì œì—ì„œëŠ”:

- `persistClient`ëŠ” `PersistedClient`ë¥¼ IndexedDBì— ì €ì¥í•©ë‹ˆë‹¤.
- `restoreClient`ëŠ” IndexedDBì—ì„œ `PersistedClient`ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
- `removeClient`ëŠ” IndexedDBì—ì„œ `PersistedClient`ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

í•„ìš”ì— ë”°ë¼ ë‹¤ë¥¸ ì €ì¥ ë©”ì»¤ë‹ˆì¦˜ì´ë‚˜ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ì´ êµ¬í˜„ì„ ì‚¬ìš©ìí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
